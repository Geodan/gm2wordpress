{"version":3,"sources":["NamespaceConfig.js","ConfigManager.js","gdmap-config.js"],"names":["define","G","config","version","$","ConfigManager","core","Class","extend","statics","DEFAULT_BASE_URL","DEFAULT_BASE_SERVICE","DEFAULT_DATA_SERVICE","_baseurl","_account","_service","_requestManager","initialize","baseurl","account","serviceName","this","undefined","RequestManager","getBaseurl","getAccount","getService","getVersion","options","url","encodeURIComponent","xhr","get","getConfig","configName","context","promise","Deferred","then","data","textStatus","jqXHR","resolveWith","errorThrown","rejectWith","getConfigData","getConfigDataUrl","getAllConfigs","replace","getAllPublicConfigs","setConfig","contentType","put","deleteConfig"],"mappings":"AAAA,AAAAA,OAAA,mBACA,cAEA,SAAAC,GACA,YAKA,OAHAA,GAAAC,UACAD,EAAAC,OAAAC,QAAA,iBAEAF,IAEAD,OAAA,iBCVA,kBACA,UAEA,SAAAC,EAAAG,GACA,YA4IA,OA1IAH,GAAAC,OAAAG,cAAAJ,EAAAK,KAAAC,MAAAC,QACAC,SACAC,iBAAA,iBACAC,qBAAA,SACAC,qBAAA,QAGAC,SAAA,KACAC,SAAA,KACAC,SAAA,KACAC,gBAAA,KAEAC,WAAA,SAAAC,EAAAC,EAAAC,GACAC,KAAAR,SAAAS,SAAAJ,GAAA,OAAAA,GAAA,KAAAA,EAAAjB,EAAAC,OAAAG,cAAAK,iBAAAQ,EACAG,KAAAP,SAAAK,GAAA,KACAE,KAAAN,SAAAK,GAAAnB,EAAAC,OAAAG,cAAAM,qBACAU,KAAAL,gBAAA,GAAAf,GAAAK,KAAAiB,gBAGAC,WAAA,WACA,MAAAH,MAAAR,UAGAY,WAAA,WACA,MAAAJ,MAAAP,UAGAY,WAAA,WACA,MAAAL,MAAAN,UAGAY,WAAA,SAAAC,GACA,GAAAC,GAAAR,KAAAR,SAAAiB,mBAAA,WACAC,EAAAV,KAAAL,gBAAAgB,IAAAH,EAAAD,EACA,OAAAG,IAGAE,UAAA,SAAAC,EAAA/B,EAAAyB,GACA,GACAO,GAAAP,EAAAO,SAAAd,KACAe,EAAAhC,EAAAiC,WACAR,EAAAR,KAAAR,SAAAiB,mBAAAT,KAAAP,UAAA,IAAAgB,mBAAAT,KAAAN,UAAA,IAAAe,mBAAAI,GACAH,EAAAV,KAAAL,gBAAAgB,IAAAH,EAAAD,EAUA,OATAG,GAAAO,KACA,SAAAC,EAAAC,EAAAC,GACAL,EAAAM,YAAAP,GAAAI,EAAAC,EAAAC,KAEA,SAAAA,EAAAD,EAAAG,GACAP,EAAAQ,WAAAT,GAAAK,MAIAJ,GAGAS,cAAA,SAAAX,EAAA/B,EAAAyB,GACA,GACAO,GAAAP,EAAAO,SAAAd,KACAe,EAAAhC,EAAAiC,WACAN,EAAAV,KAAAL,gBAAAgB,IAAAX,KAAAyB,iBAAAZ,GAAAN,EAUA,OATAG,GAAAO,KACA,SAAAC,EAAAC,EAAAC,GACAL,EAAAM,YAAAP,GAAAI,EAAAC,EAAAC,KAEA,SAAAA,EAAAD,EAAAG,GACAP,EAAAQ,WAAAT,GAAAK,MAIAJ,GAGAU,iBAAA,SAAAZ,GACA,MAAAb,MAAAR,SAAAZ,EAAAC,OAAAG,cAAAO,qBAAA,IAAAkB,mBAAAT,KAAAP,UAAA,IAAAgB,mBAAAT,KAAAN,UAAA,IAAAe,mBAAAI,IAGAa,cAAA,SAAAnB,GACA,GAAAC,GAAAR,KAAAR,SAAAiB,mBAAAT,KAAAP,UAAA,IAAAgB,mBAAAT,KAAAN,SAEA,OADAc,GAAAA,EAAAmB,QAAA,MAAA,IACA3B,KAAAL,gBAAAgB,IAAAH,EAAAD,IAYAqB,oBAAA,SAAArB,GACA,GAAAC,EAiBA,OAbAA,GAHAR,KAAAP,SAGAO,KAAAR,SAAAiB,mBAAAT,KAAAP,UAAA,IAAAgB,mBAAAT,KAAAN,UAUAM,KAAAR,SAEAgB,EAAAA,EAAAmB,QAAA,MAAA,IACA3B,KAAAL,gBAAAgB,IAAAH,EAAAD,IAcAsB,UAAA,SAAAtB,GAIA,MAHAA,GAAAxB,EAAAI,OAAAoB,GACAuB,YAAA,qBAEA9B,KAAAL,gBAAAoC,IAAA/B,KAAAR,SAAAe,IAGAyB,aAAA,SAAAzB,GAIA,MAHAA,GAAAxB,EAAAI,OAAAoB,GACAuB,YAAA,qBAEA9B,KAAAL,gBAAAK,UAAAA,KAAAR,SAAAe,MAIA3B,IAGAD,OAAA,gBCnJA,aACA,iBAEA,SAAAC,GACA,YAEA,OAAAA;AFNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA,ADWA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"gdmap-config.min.js","sourcesContent":["define('NamespaceConfig',[\n\t\t'gdmap-core'\n\t],\n\tfunction (G) {\n\t\t'use strict';\n\n\t\tG.config = {};\n\t\tG.config.version = '0.3.12-171';\n\n\t\treturn G;\n\t});\n","define('ConfigManager',[\n\t\t'NamespaceConfig',\n\t\t'jquery'\n\t],\n\tfunction (G, $) {\n\t\t'use strict';\n\n\t\tG.config.ConfigManager = G.core.Class.extend({\n\t\t\tstatics: {\n\t\t\t\tDEFAULT_BASE_URL: '/document/api/',\n\t\t\t\tDEFAULT_BASE_SERVICE: 'config',\n\t\t\t\tDEFAULT_DATA_SERVICE: 'data'\n\t\t\t},\n\n\t\t\t_baseurl: null,\n\t\t\t_account: null,\n\t\t\t_service: null,\n\t\t\t_requestManager: null,\n\n\t\t\tinitialize: function (baseurl, account, serviceName) {\n\t\t\t\tthis._baseurl = (baseurl === undefined || baseurl === null || baseurl === '') ? G.config.ConfigManager.DEFAULT_BASE_URL : baseurl;\n\t\t\t\tthis._account = account || null;\n\t\t\t\tthis._service = serviceName || G.config.ConfigManager.DEFAULT_BASE_SERVICE;\n\t\t\t\tthis._requestManager = new G.core.RequestManager();\n\t\t\t},\n\n\t\t\tgetBaseurl: function() {\n\t\t\t\treturn this._baseurl;\n\t\t\t},\n\n\t\t\tgetAccount: function() {\n\t\t\t\treturn this._account;\n\t\t\t},\n\n\t\t\tgetService: function() {\n\t\t\t\treturn this._service;\n\t\t\t},\n\n\t\t\tgetVersion: function (options) {\n\t\t\t\tvar url = this._baseurl + encodeURIComponent('version');\n\t\t\t\tvar xhr = this._requestManager.get(url, options);\n\t\t\t\treturn xhr;\n\t\t\t},\n\n\t\t\tgetConfig: function (configName, version, options) {\n\t\t\t\tvar self = this;\n\t\t\t\tvar context = options.context || this;\n\t\t\t\tvar promise = $.Deferred();\n\t\t\t\tvar url = this._baseurl + encodeURIComponent(this._account) + '/' + encodeURIComponent(this._service) + '/' + encodeURIComponent(configName);\n\t\t\t\tvar xhr = this._requestManager.get(url, options);\n\t\t\t\txhr.then(\n\t\t\t\t\tfunction (data, textStatus, jqXHR) {\n\t\t\t\t\t\tpromise.resolveWith(context, [data, textStatus, jqXHR]);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\tpromise.rejectWith(context, [textStatus]);\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\treturn promise;\n\t\t\t},\n\n\t\t\tgetConfigData: function (configName, version, options) {\n\t\t\t\tvar self = this;\n\t\t\t\tvar context = options.context || this;\n\t\t\t\tvar promise = $.Deferred();\n\t\t\t\tvar xhr = this._requestManager.get(this.getConfigDataUrl(configName), options);\n\t\t\t\txhr.then(\n\t\t\t\t\tfunction (data, textStatus, jqXHR) {\n\t\t\t\t\t\tpromise.resolveWith(context, [data, textStatus, jqXHR]);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\tpromise.rejectWith(context, [textStatus]);\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\treturn promise;\n\t\t\t},\n\n\t\t\tgetConfigDataUrl: function (configName) {\n\t\t\t\treturn this._baseurl + G.config.ConfigManager.DEFAULT_DATA_SERVICE + '/' + encodeURIComponent(this._account) + '/' + encodeURIComponent(this._service) + '/' + encodeURIComponent(configName);\n\t\t\t},\n\n\t\t\tgetAllConfigs: function (options) {\n\t\t\t\tvar url = this._baseurl + encodeURIComponent(this._account) + '/' + encodeURIComponent(this._service);\n\t\t\t\turl = url.replace(/\\/$/, ''); //Strip trailing slash\n\t\t\t\treturn this._requestManager.get(url, options);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Get public configs.\n\t\t\t * It has two forms:\n\t\t\t * - without specifying an account: returns all public documents\n\t\t\t * - with specifying an account: returns all configs\n\t\t\t *\n\t\t\t * @param options - jQuery Ajax options\n\t\t\t * @returns {promise} - A jQuery style promise for the executed request\n\t\t\t */\n\t\t\tgetAllPublicConfigs: function (options) {\n\t\t\t\tvar url;\n\t\t\t\tif (this._account) {\n\t\t\t\t\t// get all public configs for a certain organisation\n\t\t\t\t\t// Example url: https://ontw.geodan.nl/public/document/wiebenik/api/GEOD8602XXXX/config\n\t\t\t\t\turl = this._baseurl + encodeURIComponent(this._account) + '/' + encodeURIComponent(this._service);\n\t\t\t\t} else {\n\t\t\t\t\t// get all public configs\n\t\t\t\t\t// RVM20150430: the purpose of this function is to return all public configs. However, the base url returns\n\t\t\t\t\t// all public documents! As a consequence the caller of this function has to filter the response by service 'config'\n\t\t\t\t\t// Example url: https://ontw.geodan.nl/public/document/wiebenik/api\n\t\t\t\t\t// There should be a way to insert the service in the url, like:\n\t\t\t\t\t// https://ontw.geodan.nl/public/document/wiebenik/api/dummyOrgCode/config\n\t\t\t\t\t//\n\t\t\t\t\t// Related Mantis item: http://mantis.geodan.nl/view.php?id=24069\n\t\t\t\t\turl = this._baseurl;\n\t\t\t\t}\n\t\t\t\turl = url.replace(/\\/$/, ''); //Strip trailing slash\n\t\t\t\treturn this._requestManager.get(url, options);\n\t\t\t},\n\n\t\t\t// stuff to save should be in options object with property name data\n\t\t\t// example:\n\t\t\t//var options = {\n\t\t\t//\tcontext: self,\n\t\t\t//\tdata: {\n\t\t\t//\t\taccount: '',\n\t\t\t//\t\tname: '',\n\t\t\t//\t\tservice: '',\n\t\t\t//\t\tdata: document\n\t\t\t//\t}\n\t\t\t//};\n\t\t\tsetConfig: function (options) {\n\t\t\t\toptions = $.extend(options, {\n\t\t\t\t\tcontentType: 'application/json'\n\t\t\t\t});\n\t\t\t\treturn this._requestManager.put(this._baseurl, options);\n\t\t\t},\n\n\t\t\tdeleteConfig: function (options) {\n\t\t\t\toptions = $.extend(options, {\n\t\t\t\t\tcontentType: 'application/json'\n\t\t\t\t});\n\t\t\t\treturn this._requestManager.delete(this._baseurl, options);\n\t\t\t}\n\t\t});\n\n\t\treturn G;\n\t});\n\n","define('gdmap-config',[\n\t\t'gdmap-core',\n\t\t'ConfigManager'\n\t],\n\tfunction (G) {\n\t\t'use strict';\n\n\t\treturn G;\n\t});\n\n"]}